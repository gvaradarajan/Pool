{"version":3,"sources":["webpack:///webpack/bootstrap 4236c6623bb174c6aff5","webpack:///./lib/pool.js","webpack:///./lib/ball.js","webpack:///./lib/movingObject.js","webpack:///./lib/vector.js","webpack:///./lib/util.js","webpack:///./lib/game.js","webpack:///./lib/gameView.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA,iDAAgD;AAChD,yBAAwB;AACxB;AACA;AACA,kDAAiD;AACjD,yBAAwB;AACxB;AACA;AACA,kDAAiD;AACjD,yBAAwB;AACxB;AACA;AACA,kDAAiD;AACjD,yBAAwB;AACxB;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACvCA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;ACbA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;;;;;;;;ACtMA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACjEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB,uCAAuC;AAC5D,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,mBAAkB,uBAAuB;AACzC;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;;AAEA;AACA,iBAAgB,uBAAuB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4236c6623bb174c6aff5\n **/","var Ball = require('./ball.js');\nvar Vector = require('./vector.js');\nvar Game = require('./game.js');\nvar GameView = require('./gameView.js');\nvar Util = require('./util.js');\n\nvar canvas = document.getElementById('canvas');\nvar c = canvas.getContext('2d');\nvar v1 = new Vector(0, 0);\nvar v2 = new Vector(0, 0);\nvar v3 = new Vector(0, 3);\nvar v4 = new Vector(3, 1);\nvar newObj = new Ball({pos: [200, 30],\n                               vel: v1,\n                               radius: 20,\n                               color: \"#00FF00\"});\nvar newObj2 = new Ball({pos: [370, 500],\n                                vel: v2,\n                                radius: 20,\n                                color: \"#FF0000\"});\nvar newObj3 = new Ball({pos: [30, 300],\n                                vel: v3,\n                                radius: 20,\n                                color: \"#FFF000\"});\nvar newObj4 = new Ball({pos: [100, 200],\n                                vel: v4,\n                                radius: 20,\n                                color: \"#FFF000\"});\nvar newObj5 = new Ball({pos: [30, 700],\n                                vel: v3,\n                                radius: 20,\n                                color: \"#FFF000\"});\nvar game = new Game();\ngame.addBall(newObj);\ngame.addBall(newObj2);\ngame.addBall(newObj3);\n// game.addBall(newObj4);\n// game.addBall(newObj5);\nvar gameView = new GameView(game, c);\ngameView.turn();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/pool.js\n ** module id = 0\n ** module chunks = 0\n **/","var MovingObject = require('./movingObject.js');\nvar Util = require('./util.js');\n\nvar DEFAULTS = {\n  RADIUS: 25\n};\n\nvar Ball = function (options)  {\n  options.radius = DEFAULTS.RADIUS;\n  MovingObject.call(this, options);\n};\n\nUtil.inherits(Ball, MovingObject);\n\nmodule.exports = Ball;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/ball.js\n ** module id = 1\n ** module chunks = 0\n **/","\nvar Vector = require('./vector.js');\n\nvar _trunc = function (num) {\n  return parseFloat(num.toFixed(4));\n};\n\nvar MovingObject = function (settings) {\n  this.pos = settings.pos;\n  this.vel = settings.vel;\n  this.radius = settings.radius;\n  this.color = settings.color;\n};\n\nMovingObject.prototype.draw = function (ctx) {\n  ctx.fillStyle = this.color;\n  ctx.beginPath();\n  ctx.arc(this.pos[0], this.pos[1], this.radius, 0, 2 * Math.PI, false);\n  ctx.fill();\n};\n\nMovingObject.prototype.equals = function (otherObj) {\n  if (this.pos[0] === otherObj.pos[0] && this.pos[1] === otherObj.pos[1]) {\n    return true;\n  }\n  return false;\n};\n\nMovingObject.prototype.move = function (coeffFriction, otherObjs) {\n  this.radius = 20;\n  coeffFriction = coeffFriction || 0;\n  var that = this;\n  otherObjs.forEach(function (obj) {\n    if (that.isCollidedWith(obj) && !that.equals(obj)) {\n      if (that.isGlancingWith(obj)) {\n        that.handleGlancingCollision(obj);\n      }\n      else {\n        if (obj.isStationary()) {\n          that.handleStationaryCollision(obj);\n        }\n        else {\n          that.handleCollision(obj);\n        }\n      }\n    }\n  });\n  this.pos[0] += this.vel[0];\n  this.pos[1] += this.vel[1];\n  var Ybound = 750 - this.radius;\n  var Xbound = 400 - this.radius;\n  var dimXRef = this.pos[0] > Xbound || this.pos[0] < 0 + this.radius;\n  var dimYRef = this.pos[1] > Ybound || this.pos[1] < 0 + this.radius;\n  if (dimXRef || dimYRef) {\n    this.pos[0] -= this.vel[0];\n    this.pos[1] -= this.vel[1];\n    this.bounce(dimXRef, dimYRef);\n  }\n  this.vel[0] = this.vel[0] * Math.sqrt(1 - coeffFriction);\n  this.vel[1] = this.vel[1] * Math.sqrt(1 - coeffFriction);\n};\n\nMovingObject.prototype.bounce = function (bounceX, bounceY) {\n  this.vel[0] = bounceX ? -this.vel[0] : this.vel[0];\n  this.vel[1] = bounceY ? -this.vel[1] : this.vel[1];\n};\n\nMovingObject.prototype.getCollisionAngle = function (otherObj) {\n  return this.vel.getRelativeAngle(otherObj.vel);\n};\n\nMovingObject.prototype.isCollidedWith = function (otherObj) {\n  var distance = new Vector(otherObj.pos[0] - this.pos[0], otherObj.pos[1] - this.pos[1]);\n  if (distance.mag() <= (this.radius + otherObj.radius)) {\n    return true;\n  }\n  return false;\n};\n\nMovingObject.prototype.isGlancingWith = function (otherObj) {\n  var collAngle = _trunc(this.getCollisionAngle(otherObj));\n  if (collAngle === _trunc(Math.PI) || collAngle === 0) {\n    var connVec = new Vector(this.pos[0] - otherObj.pos[0], this.pos[1] - otherObj.pos[1]);\n    var connVecAngle = _trunc(connVec.findTheta());\n    if (connVecAngle !== _trunc(Math.PI) && connVecAngle !== 0) {\n      return true;\n    }\n  }\n  return false;\n};\n\nMovingObject.prototype.handleCollision = function (otherObj) {\n  if (this.isStationary()) {\n    otherObj.handleStationaryCollision(this);\n    return;\n  }\n\n  if (this.vel[0] === 0 && otherObj.vel[0] === 0) {\n    this.bounce(false, true);\n    otherObj.bounce(false, true);\n    return;\n  }\n\n\n  var collAngle = this.getCollisionAngle(otherObj);\n  var angle1 = this.vel.findTheta();\n  var angle2 = otherObj.vel.findTheta();\n  var thisVel = new Vector(this.vel[0], -this.vel[1]);\n  var otherVel = new Vector(otherObj.vel[0], -otherObj.vel[1]);\n  // var thisVel = new Vector(this.vel[0], -this.vel[1]);\n  // var otherVel = new Vector(otherObj.vel[0], -otherObj.vel[1]);\n\n\n  this.vel[0] = otherVel.mag() * _trunc(Math.cos(angle2-collAngle)) * _trunc(Math.cos(collAngle));\n  this.vel[0] += thisVel.mag() * _trunc(Math.sin(angle1-collAngle)) * _trunc(Math.cos(collAngle + (Math.PI / 2)));\n  this.vel[1] = otherVel.mag() * _trunc(Math.cos(angle2-collAngle)) * _trunc(Math.sin(collAngle));\n  this.vel[1] += thisVel.mag() * _trunc(Math.sin(angle1-collAngle)) * _trunc(Math.sin(collAngle + (Math.PI / 2)));\n\n  this.vel[0] = _trunc(this.vel[0]);\n  this.vel[1] = _trunc(this.vel[1]);\n\n  otherObj.vel[0] = thisVel.mag() * _trunc(Math.cos(angle1-collAngle)) * _trunc(Math.cos(collAngle));\n  otherObj.vel[0] += otherVel.mag() * _trunc(Math.sin(angle2-collAngle)) * _trunc(Math.cos(collAngle + (Math.PI / 2)));\n  otherObj.vel[1] = thisVel.mag() * _trunc(Math.cos(angle1-collAngle)) * _trunc(Math.sin(collAngle));\n  otherObj.vel[1] += otherVel.mag() * _trunc(Math.sin(angle2-collAngle)) * _trunc(Math.sin(collAngle + (Math.PI / 2)));\n\n  otherObj.vel[0] = _trunc(otherObj.vel[0]);\n  otherObj.vel[1] = _trunc(otherObj.vel[1]);\n\n//\n  // otherObj.vel[1] = -otherObj.vel[1];\n  // this.vel[1] = -this.vel[1];\n//\n\n};\n\nMovingObject.prototype.isStationary = function () {\n  if (this.vel[0] < 0.01 && this.vel[1] < 0.01) {\n    return true;\n  }\n  return false;\n};\n\nMovingObject.prototype.handleStationaryCollision = function (stillObj) {\n  if (!this.isStationary()) {\n    stillObj.vel[0] = this.vel[0];\n    stillObj.vel[1] = this.vel[1];\n    this.vel[0] = 0;\n    this.vel[1] = 0;\n  }\n};\n\nMovingObject.prototype.handleGlancingCollision = function (otherObj) {\n  if (otherObj.isStationary()) {\n    otherObj.handleGlancingCollision(this);\n    return;\n  }\n\n\n  var resultRotation = this.vel.findTheta();\n\n  var connVec = new Vector(this.pos[0] - otherObj.pos[0], this.pos[1] - otherObj.pos[1]);\n  var thisVel = new Vector(this.vel.mag(), 0);\n  var collAngle = _trunc(thisVel.getRelativeAngle(connVec));\n  var otherDir = connVec.findTheta();\n  var otherVel = new Vector(otherObj.vel.mag() * Math.cos(otherDir),\n                            otherObj.vel.mag() * Math.sin(otherDir));\n  var angle1 = 0;\n  var angle2 = Math.PI - collAngle;\n\n  var newThis = new Vector();\n  var newOther = new Vector();\n\n  newThis[0] = otherVel.mag() * _trunc(Math.cos(angle2-collAngle)) * _trunc(Math.cos(collAngle));\n  newThis[0] += thisVel.mag() * _trunc(Math.sin(angle1-collAngle)) * _trunc(Math.cos(collAngle + (Math.PI / 2)));\n  newThis[1] = otherVel.mag() * _trunc(Math.cos(angle2-collAngle)) * _trunc(Math.sin(collAngle));\n  newThis[1] += thisVel.mag() * _trunc(Math.sin(angle1-collAngle)) * _trunc(Math.sin(collAngle + (Math.PI / 2)));\n\n  newThis[0] = _trunc(newThis[0]);\n  newThis[1] = _trunc(newThis[1]);\n\n  newOther[0] = thisVel.mag() * _trunc(Math.cos(angle1-collAngle)) * _trunc(Math.cos(collAngle));\n  newOther[0] += otherVel.mag() * _trunc(Math.sin(angle2-collAngle)) * _trunc(Math.cos(collAngle + (Math.PI / 2)));\n  newOther[1] = thisVel.mag() * _trunc(Math.cos(angle1-collAngle)) * _trunc(Math.sin(collAngle));\n  newOther[1] += otherVel.mag() * _trunc(Math.sin(angle2-collAngle)) * _trunc(Math.sin(collAngle + (Math.PI / 2)));\n\n  newOther[0] = _trunc(newOther[0]);\n  newOther[1] = _trunc(newOther[1]);\n\n  this.vel = newThis.rotate(resultRotation);\n  otherObj.vel = newOther.rotate(resultRotation);\n\n  this.vel[1] = -this.vel[1];\n  otherObj.vel[1] = -otherObj.vel[1];\n\n};\n\n\n\nmodule.exports = MovingObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/movingObject.js\n ** module id = 2\n ** module chunks = 0\n **/","\nvar Vector = function (x, y) {\n  this[0] = x;\n  this[1] = y;\n};\n\nvar _trunc = function (num) {\n  return parseFloat(num.toFixed(4));\n};\n\n\nVector.prototype.findTheta = function () {\n  if (this[0] === 0) {\n    if (this[1] > 0) {\n      return Math.PI / 2;\n    }\n    else {\n      return -Math.PI / 2;\n    }\n  }\n  if (this[1] === 0) {\n    if (this[0] > 0) {\n      return 0;\n    }\n    else {\n      return Math.PI;\n    }\n  }\n  if (this[0] > 0) {\n    return Math.atan(-this[1] / this[0]);\n  }\n  else {\n    return Math.atan(-this[1] / this[0]) + Math.PI;\n  }\n};\n\nVector.prototype.scalarProd = function (vec) {\n  return (this[0] * vec[0]) + (this[1] * vec[1]);\n};\n\nVector.prototype.norm = function () {\n  return Math.pow(this[0], 2) + Math.pow(this[1], 2);\n};\n\nVector.prototype.mag = function () {\n  return Math.sqrt(this.norm());\n};\n\nVector.prototype.getRelativeAngle = function (vec) {\n  var innerVal = this.scalarProd(vec) / (Math.sqrt(this.norm()) * Math.sqrt(vec.norm()));\n  if (_trunc(innerVal) === 1) {\n    if (this.norm() === vec.norm()) {\n      return 0;\n    }\n    return false;\n  }\n  return Math.acos(_trunc(innerVal));\n};\n\nVector.prototype.rotate = function (angle) {\n  var newX = this[0] * Math.cos(angle) - this[1] * Math.sin(angle);\n  var newY = this[0] * Math.sin(angle) - this[1] * Math.cos(angle);\n  return new Vector(newX, newY);\n};\n\nmodule.exports = Vector;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/vector.js\n ** module id = 3\n ** module chunks = 0\n **/","var Vector = require('./vector.js');\n\nvar Util = {\n  WIDTH: 750,\n  HEIGHT: 750,\n\n  inherits: function (ChildClass, ParentClass) {\n    var surrogate = function () {};\n    surrogate.prototype = ParentClass.prototype;\n    ChildClass.prototype = new surrogate();\n    ChildClass.prototype.constructor = ChildClass;\n  },\n\n  randomVec: function (length) {\n    var dir = Math.random() * 2 * Math.PI;\n    return new Vector(length * Math.cos(dir), length * Math.sin(dir));\n  }\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 4\n ** module chunks = 0\n **/","var Ball = require('./ball.js');\n\nvar _holesPos = [[20, 20], [380, 20], [20, 730], [380, 730]];\n\nvar Game = function () {\n  this.balls = [];\n  this.DIM_X = 400;\n  this.DIM_Y = 750;\n  this.holes = _holesPos.map(function (pos) {\n    return new Ball({pos: pos, radius: 20, color: \"#000000\"});\n  });\n};\n\nGame.prototype.addBall = function (ball) {\n  this.balls.push(ball);\n};\n\nGame.prototype.draw = function (ctx) {\n  this.holes.forEach(function (hole) {\n    hole.draw(ctx);\n  });\n  this.balls.forEach(function (ball) {\n    ball.draw(ctx);\n  });\n};\n\nGame.prototype.moveObjects = function () {\n  var checked = [];\n  this.balls.forEach(function (ball) {\n    checked.push(ball);\n  });\n  // var t1 = Date.now();\n  this.balls.forEach(function (ball) {\n    ball.move(0.0054, checked);\n    var idx = checked.indexOf(ball);\n    checked.splice(idx, 1);\n  });\n  // console.log(Date.now() - t1);\n};\n\nGame.prototype.checkPockets = function () {\n  var deleteIndices = [];\n  this.balls.forEach(function (ball, idx) {\n    for(var i = 0; i < this.holes.length; i++) {\n      if (ball.isCollidedWith(this.holes[i])) {\n        deleteIndices.push(idx);\n        continue;\n      }\n    }\n  }.bind(this));\n  deleteIndices.forEach(function (idx) {\n    this.balls.splice(idx, 1);\n  }.bind(this));\n};\n\nGame.prototype.isStationary = function () {\n  for(var i = 0; i < this.balls.length; i++) {\n    if (!this.balls[i].isStationary()) {\n      return false;\n    }\n  }\n  return true;\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 5\n ** module chunks = 0\n **/","var Game = require('./game.js');\n\nvar GameView = function (game, ctx) {\n  this.game = game;\n  this.ctx = ctx;\n};\n\nGameView.prototype.turn = function () {\n  var gameState = setInterval(function () {\n    this.game.checkPockets();\n    this.ctx.clearRect(0, 0, this.game.DIM_X, this.game.DIM_Y);\n    this.ctx.fillStyle = \"#0B610B\";\n    this.ctx.fillRect(0, 0, 400, 750);\n    this.game.draw(this.ctx);\n    this.game.moveObjects();\n    if (this.game.isStationary()) {\n      clearInterval(gameState);\n    }\n  }.bind(this), 20);\n};\n\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/gameView.js\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}